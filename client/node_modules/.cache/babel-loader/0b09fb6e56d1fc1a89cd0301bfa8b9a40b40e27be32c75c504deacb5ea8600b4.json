{"ast":null,"code":"import _slicedToArray from\"E:/snapbliss/projectinstaverse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from\"react-router-dom\";import{Layout,Image,Typography,Button,Avatar}from\"antd\";import styles from'./styles';import Logo from\"../../images/Instaverse.png\";import{useDispatch}from'react-redux';import{LOGOUT}from\"../../constants/actionTypes\";import decode from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Title=Typography.Title;var Header=Layout.Header;export default function AppBar(){var _user$result,_user$result$username,_user$result$username2,_user$result2;var dispatch=useDispatch();var navigate=useNavigate();var location=useLocation();var _useState=useState(JSON.parse(localStorage.getItem(\"profile\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem(\"profile\")));},[location]);var logout=function logout(){dispatch({type:LOGOUT});navigate(\"/authform\");setUser(null);};return/*#__PURE__*/_jsxs(Header,{style:styles.header,children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsxs(\"div\",{style:styles.header,children:[/*#__PURE__*/_jsx(Image,{style:styles.image,width:45,preview:false,src:Logo}),\"\\xA0\",/*#__PURE__*/_jsx(Title,{style:styles.title,children:\"Book\"})]})}),!user?/*#__PURE__*/_jsx(Link,{to:\"/authform\",children:/*#__PURE__*/_jsx(Button,{htmlType:\"button\",style:styles.login,children:\"Log In\"})}):/*#__PURE__*/_jsxs(\"div\",{style:styles.userInfo,children:[/*#__PURE__*/_jsx(Avatar,{style:styles.avatar,alt:\"username\",size:\"large\",children:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:(_user$result$username=_user$result.username)===null||_user$result$username===void 0?void 0:(_user$result$username2=_user$result$username.charAt(0))===null||_user$result$username2===void 0?void 0:_user$result$username2.toUpperCase()}),/*#__PURE__*/_jsx(Title,{style:styles.title,level:4,children:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.username}),/*#__PURE__*/_jsx(Button,{onClick:logout,htmlType:\"button\",children:\"Log Out\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useLocation","Layout","Image","Typography","Button","Avatar","styles","Logo","useDispatch","LOGOUT","decode","jsx","_jsx","jsxs","_jsxs","Title","Header","AppBar","_user$result","_user$result$username","_user$result$username2","_user$result2","dispatch","navigate","location","_useState","JSON","parse","localStorage","getItem","_useState2","_slicedToArray","user","setUser","token","decodedToken","exp","Date","getTime","logout","type","style","header","children","to","image","width","preview","src","title","htmlType","login","userInfo","avatar","alt","size","result","username","charAt","toUpperCase","level","onClick"],"sources":["E:/snapbliss/projectinstaverse/client/src/components/AppBar/AppBar.js"],"sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {Link,useNavigate,useLocation} from \"react-router-dom\";\r\nimport {Layout,Image,Typography,Button,Avatar} from \"antd\";\r\nimport styles from './styles';\r\nimport Logo from \"../../images/Instaverse.png\";\r\nimport { useDispatch } from 'react-redux';\r\nimport {LOGOUT} from \"../../constants/actionTypes\";\r\nimport decode from 'jwt-decode';\r\nconst {Title}=Typography;\r\nconst {Header}=Layout;\r\n\r\nexport default function AppBar(){\r\n    const dispatch=useDispatch();\r\n    const navigate=useNavigate();\r\n    const location=useLocation();\r\n    const [user,setUser]=useState(JSON.parse(localStorage.getItem(\"profile\")));\r\n    useEffect(()=>{\r\n        const token=user?.token;\r\n        if(token){\r\n            const decodedToken = decode(token);\r\n            if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n        }\r\n        setUser(JSON.parse(localStorage.getItem(\"profile\")));\r\n    },[location]);\r\n    const logout=()=>{\r\n        dispatch({type:LOGOUT});\r\n        navigate(\"/authform\");\r\n        setUser(null);\r\n    }\r\n     return (\r\n    <Header style={styles.header}>\r\n        <Link to=\"/\">\r\n        <div style={styles.header}>\r\n        <Image style={styles.image} width={45} preview={false} src={Logo}/>\r\n        &nbsp;\r\n        <Title style={styles.title}>Book</Title>\r\n        </div>\r\n        </Link>\r\n        {!user ?(\r\n            <Link to=\"/authform\">\r\n                <Button htmlType='button' style={styles.login}>\r\n                    Log In\r\n                </Button>\r\n            </Link>\r\n        ):\r\n        ( \r\n            <div style={styles.userInfo}>\r\n                <Avatar style={styles.avatar} alt=\"username\" size=\"large\">\r\n                    {user?.result?.username?.charAt(0)?.toUpperCase()}\r\n                </Avatar>\r\n                <Title style={styles.title} level={4}>\r\n                   {user?.result?.username}\r\n                </Title>\r\n                <Button onClick={logout} htmlType='button'>\r\n                    Log Out\r\n                </Button>\r\n            </div>\r\n        )}\r\n    </Header>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}