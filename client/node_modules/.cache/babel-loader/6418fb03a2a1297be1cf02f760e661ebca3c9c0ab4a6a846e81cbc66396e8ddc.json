{"ast":null,"code":"import _objectSpread from\"E:/snapbliss/projectinstaverse/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/snapbliss/projectinstaverse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import styles from'./styles';import FileBase64 from\"react-file-base64\";import{Button,Card,Form,Input,Typography}from\"antd\";import{useDispatch,useSelector}from'react-redux';import{createStory,updateStory}from'../../actions/stories';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Title=Typography.Title;function StoryForm(_ref){var _user$result;var selectedId=_ref.selectedId,setSelectedId=_ref.setSelectedId;var story=useSelector(function(state){return selectedId?state.stories.find(function(story){return story._id===selectedId;}):null;});var dispatch=useDispatch();var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var user=JSON.parse(localStorage.getItem(\"profile\"));var username=user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.username;var onSubmit=function onSubmit(formValues){selectedId?dispatch(updateStory(selectedId,_objectSpread(_objectSpread({},formValues),{},{username:username}))):dispatch(createStory(_objectSpread(_objectSpread({},formValues),{},{username:username})));reset();};useEffect(function(){if(story){form.setFieldsValue(story);}},[story,form]);var reset=function reset(){form.resetFields();setSelectedId(null);};if(!user){return/*#__PURE__*/_jsx(Card,{style:styles.formCard,children:/*#__PURE__*/_jsxs(Title,{level:4,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.formTitle,children:\"Welcome to BookStore!\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Please \",/*#__PURE__*/_jsx(Link,{to:\"/authform\",children:\"login\"}),\" or\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/authform\",children:\"register\"}),\"  for adding books.\"]})});}return/*#__PURE__*/_jsx(Card,{style:styles.formCard,title:/*#__PURE__*/_jsxs(Title,{level:4,style:styles.formTitle,children:[selectedId?\"Editing\":\"Share\",\" a Book\"]}),children:/*#__PURE__*/_jsxs(Form,{form:form,labelCol:{span:6},wrapperCol:{span:16},layout:\"horizontal\",size:\"middle\",onFinish:onSubmit,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"bookname\",label:\"Book Name\",rules:[{required:true}],children:/*#__PURE__*/_jsx(Input.TextArea,{allowClear:true,autoSize:{minRows:2,maxRows:6}})}),/*#__PURE__*/_jsx(Form.Item,{name:\"bookdescription\",label:\"Book Description\",children:/*#__PURE__*/_jsx(Input.TextArea,{allowClear:true,autoSize:{minRows:2,maxRows:6}})}),/*#__PURE__*/_jsx(Form.Item,{name:\"image\",label:\"Image\",rules:[{required:true}],children:/*#__PURE__*/_jsx(FileBase64,{type:\"file\",multiple:false,onDone:function onDone(e){form.setFieldsValue({image:e.base64});}})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{span:16,offset:6},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",block:true,htmlType:\"submit\",children:\"Share\"})}),!selectedId?null:/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{span:16,offset:6},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",block:true,htmlType:\"button\",danger:true,onClick:reset,children:\"Discard\"})})]})});}export default StoryForm;","map":{"version":3,"names":["React","useEffect","styles","FileBase64","Button","Card","Form","Input","Typography","useDispatch","useSelector","createStory","updateStory","Link","jsx","_jsx","jsxs","_jsxs","Title","StoryForm","_ref","_user$result","selectedId","setSelectedId","story","state","stories","find","_id","dispatch","_Form$useForm","useForm","_Form$useForm2","_slicedToArray","form","user","JSON","parse","localStorage","getItem","username","result","onSubmit","formValues","_objectSpread","reset","setFieldsValue","resetFields","style","formCard","children","level","formTitle","to","title","labelCol","span","wrapperCol","layout","size","onFinish","Item","name","label","rules","required","TextArea","allowClear","autoSize","minRows","maxRows","type","multiple","onDone","e","image","base64","offset","block","htmlType","danger","onClick"],"sources":["E:/snapbliss/projectinstaverse/client/src/components/StoryForm/StoryForm.js"],"sourcesContent":["import React,{useEffect} from 'react';\r\nimport styles from './styles';\r\nimport FileBase64 from \"react-file-base64\";\r\nimport {Button, Card,Form,Input,Typography} from \"antd\";\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport { createStory,updateStory } from '../../actions/stories';\r\nimport { Link } from 'react-router-dom';\r\nconst {Title}=Typography;\r\nfunction StoryForm({ selectedId, setSelectedId }) {\r\n\r\n    const story = useSelector((state) => selectedId ? state.stories.find(story => story._id === selectedId) : null);\r\n  \r\n    const dispatch = useDispatch();\r\n    const [form] = Form.useForm();\r\n  \r\n    const user = JSON.parse(localStorage.getItem(\"profile\"));\r\n    const username = user?.result?.username;\r\n  \r\n    const onSubmit = (formValues) => {\r\n      selectedId ?\r\n      dispatch(updateStory(selectedId, { ...formValues, username }))\r\n      : dispatch(createStory({ ...formValues, username }));\r\n  \r\n      reset();\r\n    };\r\n  \r\n    useEffect(() => {\r\n      if(story) {\r\n        form.setFieldsValue(story);\r\n      }\r\n    }, [story, form]);\r\n  \r\n    const reset = () => {\r\n      form.resetFields();\r\n      setSelectedId(null);\r\n    }\r\n  \r\n    if (!user) {\r\n      return (\r\n        <Card style={styles.formCard}>\r\n          <Title level={4}>\r\n            <span style={styles.formTitle}>\r\n              Welcome to BookStore!\r\n            </span> <br />\r\n            Please <Link to=\"/authform\">login</Link> or{\" \"}\r\n            <Link to=\"/authform\">register</Link>  for adding books.\r\n          </Title>\r\n        </Card>\r\n      );\r\n    }\r\n  \r\n    return (\r\n      <Card\r\n        style={styles.formCard}\r\n        title={\r\n          <Title level={4} style={styles.formTitle}>\r\n            {selectedId ? \"Editing\" : \"Share\" } a Book\r\n          </Title>\r\n        }\r\n      >\r\n        <Form\r\n          form={form}\r\n          labelCol={{ span: 6 }}\r\n          wrapperCol={{ span: 16 }}\r\n          layout=\"horizontal\"\r\n          size=\"middle\"\r\n          onFinish={onSubmit}\r\n        >\r\n          <Form.Item name=\"bookname\" label=\"Book Name\" rules={[{ required: true }]} >\r\n            <Input.TextArea allowClear autoSize={{ minRows: 2, maxRows: 6 }} />\r\n          </Form.Item>\r\n          <Form.Item name=\"bookdescription\" label=\"Book Description\" >\r\n            <Input.TextArea allowClear autoSize={{ minRows: 2, maxRows: 6 }}  />\r\n          </Form.Item>\r\n          <Form.Item name=\"image\" label=\"Image\" rules={[{ required: true }]}>\r\n            <FileBase64\r\n              type=\"file\"\r\n              multiple={false}\r\n              onDone={(e) => {\r\n                form.setFieldsValue({\r\n                  image: e.base64\r\n                })\r\n              }}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item\r\n            wrapperCol={{\r\n              span: 16,\r\n              offset: 6\r\n            }}\r\n          >\r\n           <Button\r\n            type=\"primary\"\r\n            block\r\n            htmlType='submit'\r\n           >\r\n             Share\r\n           </Button>\r\n          </Form.Item>\r\n          {!selectedId ? null :\r\n            <Form.Item\r\n              wrapperCol={{\r\n                span: 16,\r\n                offset: 6\r\n              }}\r\n            >\r\n            <Button\r\n              type=\"primary\"\r\n              block\r\n              htmlType='button'\r\n              danger\r\n              onClick={reset}\r\n            >\r\n              Discard\r\n            </Button>\r\n            </Form.Item>\r\n          }\r\n        </Form>\r\n  \r\n      </Card>\r\n    )\r\n  }\r\n  \r\n  export default StoryForm"],"mappings":"qPAAA,MAAO,CAAAA,KAAK,EAAEC,SAAS,KAAO,OAAO,CACrC,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,UAAU,KAAM,mBAAmB,CAC1C,OAAQC,MAAM,CAAEC,IAAI,CAACC,IAAI,CAACC,KAAK,CAACC,UAAU,KAAO,MAAM,CACvD,OAASC,WAAW,CAACC,WAAW,KAAQ,aAAa,CACrD,OAASC,WAAW,CAACC,WAAW,KAAQ,uBAAuB,CAC/D,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACxC,GAAO,CAAAC,KAAK,CAAEV,UAAU,CAAjBU,KAAK,CACZ,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAgC,KAAAC,YAAA,IAA7B,CAAAC,UAAU,CAAAF,IAAA,CAAVE,UAAU,CAAEC,aAAa,CAAAH,IAAA,CAAbG,aAAa,CAE1C,GAAM,CAAAC,KAAK,CAAGd,WAAW,CAAC,SAACe,KAAK,QAAK,CAAAH,UAAU,CAAGG,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,SAAAH,KAAK,QAAI,CAAAA,KAAK,CAACI,GAAG,GAAKN,UAAU,GAAC,CAAG,IAAI,GAAC,CAE/G,GAAM,CAAAO,QAAQ,CAAGpB,WAAW,CAAC,CAAC,CAC9B,IAAAqB,aAAA,CAAexB,IAAI,CAACyB,OAAO,CAAC,CAAC,CAAAC,cAAA,CAAAC,cAAA,CAAAH,aAAA,IAAtBI,IAAI,CAAAF,cAAA,IAEX,GAAM,CAAAG,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,CACxD,GAAM,CAAAC,QAAQ,CAAGL,IAAI,SAAJA,IAAI,kBAAAd,YAAA,CAAJc,IAAI,CAAEM,MAAM,UAAApB,YAAA,iBAAZA,YAAA,CAAcmB,QAAQ,CAEvC,GAAM,CAAAE,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,UAAU,CAAK,CAC/BrB,UAAU,CACVO,QAAQ,CAACjB,WAAW,CAACU,UAAU,CAAAsB,aAAA,CAAAA,aAAA,IAAOD,UAAU,MAAEH,QAAQ,CAARA,QAAQ,EAAE,CAAC,CAAC,CAC5DX,QAAQ,CAAClB,WAAW,CAAAiC,aAAA,CAAAA,aAAA,IAAMD,UAAU,MAAEH,QAAQ,CAARA,QAAQ,EAAE,CAAC,CAAC,CAEpDK,KAAK,CAAC,CAAC,CACT,CAAC,CAED5C,SAAS,CAAC,UAAM,CACd,GAAGuB,KAAK,CAAE,CACRU,IAAI,CAACY,cAAc,CAACtB,KAAK,CAAC,CAC5B,CACF,CAAC,CAAE,CAACA,KAAK,CAAEU,IAAI,CAAC,CAAC,CAEjB,GAAM,CAAAW,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAA,CAAS,CAClBX,IAAI,CAACa,WAAW,CAAC,CAAC,CAClBxB,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,CAED,GAAI,CAACY,IAAI,CAAE,CACT,mBACEpB,IAAA,CAACV,IAAI,EAAC2C,KAAK,CAAE9C,MAAM,CAAC+C,QAAS,CAAAC,QAAA,cAC3BjC,KAAA,CAACC,KAAK,EAACiC,KAAK,CAAE,CAAE,CAAAD,QAAA,eACdnC,IAAA,SAAMiC,KAAK,CAAE9C,MAAM,CAACkD,SAAU,CAAAF,QAAA,CAAC,uBAE/B,CAAM,CAAC,IAAC,cAAAnC,IAAA,QAAK,CAAC,UACP,cAAAA,IAAA,CAACF,IAAI,EAACwC,EAAE,CAAC,WAAW,CAAAH,QAAA,CAAC,OAAK,CAAM,CAAC,MAAG,CAAC,GAAG,cAC/CnC,IAAA,CAACF,IAAI,EAACwC,EAAE,CAAC,WAAW,CAAAH,QAAA,CAAC,UAAQ,CAAM,CAAC,sBACtC,EAAO,CAAC,CACJ,CAAC,CAEX,CAEA,mBACEnC,IAAA,CAACV,IAAI,EACH2C,KAAK,CAAE9C,MAAM,CAAC+C,QAAS,CACvBK,KAAK,cACHrC,KAAA,CAACC,KAAK,EAACiC,KAAK,CAAE,CAAE,CAACH,KAAK,CAAE9C,MAAM,CAACkD,SAAU,CAAAF,QAAA,EACtC5B,UAAU,CAAG,SAAS,CAAG,OAAO,CAAE,SACrC,EAAO,CACR,CAAA4B,QAAA,cAEDjC,KAAA,CAACX,IAAI,EACH4B,IAAI,CAAEA,IAAK,CACXqB,QAAQ,CAAE,CAAEC,IAAI,CAAE,CAAE,CAAE,CACtBC,UAAU,CAAE,CAAED,IAAI,CAAE,EAAG,CAAE,CACzBE,MAAM,CAAC,YAAY,CACnBC,IAAI,CAAC,QAAQ,CACbC,QAAQ,CAAElB,QAAS,CAAAQ,QAAA,eAEnBnC,IAAA,CAACT,IAAI,CAACuD,IAAI,EAACC,IAAI,CAAC,UAAU,CAACC,KAAK,CAAC,WAAW,CAACC,KAAK,CAAE,CAAC,CAAEC,QAAQ,CAAE,IAAK,CAAC,CAAE,CAAAf,QAAA,cACvEnC,IAAA,CAACR,KAAK,CAAC2D,QAAQ,EAACC,UAAU,MAACC,QAAQ,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,OAAO,CAAE,CAAE,CAAE,CAAE,CAAC,CAC1D,CAAC,cACZvD,IAAA,CAACT,IAAI,CAACuD,IAAI,EAACC,IAAI,CAAC,iBAAiB,CAACC,KAAK,CAAC,kBAAkB,CAAAb,QAAA,cACxDnC,IAAA,CAACR,KAAK,CAAC2D,QAAQ,EAACC,UAAU,MAACC,QAAQ,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,OAAO,CAAE,CAAE,CAAE,CAAG,CAAC,CAC3D,CAAC,cACZvD,IAAA,CAACT,IAAI,CAACuD,IAAI,EAACC,IAAI,CAAC,OAAO,CAACC,KAAK,CAAC,OAAO,CAACC,KAAK,CAAE,CAAC,CAAEC,QAAQ,CAAE,IAAK,CAAC,CAAE,CAAAf,QAAA,cAChEnC,IAAA,CAACZ,UAAU,EACToE,IAAI,CAAC,MAAM,CACXC,QAAQ,CAAE,KAAM,CAChBC,MAAM,CAAE,SAAAA,OAACC,CAAC,CAAK,CACbxC,IAAI,CAACY,cAAc,CAAC,CAClB6B,KAAK,CAAED,CAAC,CAACE,MACX,CAAC,CAAC,CACJ,CAAE,CACH,CAAC,CACO,CAAC,cACZ7D,IAAA,CAACT,IAAI,CAACuD,IAAI,EACRJ,UAAU,CAAE,CACVD,IAAI,CAAE,EAAE,CACRqB,MAAM,CAAE,CACV,CAAE,CAAA3B,QAAA,cAEHnC,IAAA,CAACX,MAAM,EACNmE,IAAI,CAAC,SAAS,CACdO,KAAK,MACLC,QAAQ,CAAC,QAAQ,CAAA7B,QAAA,CACjB,OAED,CAAQ,CAAC,CACC,CAAC,CACX,CAAC5B,UAAU,CAAG,IAAI,cACjBP,IAAA,CAACT,IAAI,CAACuD,IAAI,EACRJ,UAAU,CAAE,CACVD,IAAI,CAAE,EAAE,CACRqB,MAAM,CAAE,CACV,CAAE,CAAA3B,QAAA,cAEJnC,IAAA,CAACX,MAAM,EACLmE,IAAI,CAAC,SAAS,CACdO,KAAK,MACLC,QAAQ,CAAC,QAAQ,CACjBC,MAAM,MACNC,OAAO,CAAEpC,KAAM,CAAAK,QAAA,CAChB,SAED,CAAQ,CAAC,CACE,CAAC,EAEV,CAAC,CAEH,CAAC,CAEX,CAEA,cAAe,CAAA/B,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}